@{
    ViewBag.Title = "首页";
    Layout = "~/Areas/Mobile/Views/Shared/_Layout.cshtml";
}


<style>
  
   body,html {
        margin: 0px; 
        overflow: hidden;
        height:100%;
    }
   
    a {
        color: black;
    }

    .MenuSub {
        width: 18%;
        height: 18%;
        margin: 7% 7.5%;
        float: left;
    }

    .MenuSubIcon {
        width: 100%;
        height: 75%;
        border-radius: 100%;
        margin: 5px 2px;
        float: left;
        text-align: center;
    }

        .MenuSubIcon .fa {
            display: block;
            text-align: center;
            position: relative; 
            color: white;
            line-height: 50px; 
        }

    .MenuSubText {
        position: relative;
        font-size: 14px;
    }


    .MenuContent {
        height: 100%;
    }
     
       .Menu {
        width: 50%;
        height: 100%;
        float: left;
        }

        .MenuIcon {
            width: 100%;
            font-size: 22px;
            float: left;
        }

        .MenuText {
            width: 100%;
            font-size: 14px;
            float: left;
        }

        .ChooseMenu {
            color: #5FABE3;
        }

    .fa-2x {
        font-size: 1.5em !important;
    }

    .MenuPar {
       position:absolute;
       width:200px;
       height:200px; 
       right:0; 
       bottom:10%;
       z-index:999;
    }

    .ParIcon {
        width:70px;
        height:70px; 
        text-align:center;
        border-radius:50%;    
        position:absolute;
        left:90px; 
        top:90px;
        background:rgba(113, 187, 240, 0.3);
        text-align:center;
        
    }

    .TypeMenuBg {
        height:60px;
        width:60px;
        border-radius:50%; 
        background:rgba(113, 187, 240, 0.7);
        text-align:center;
        line-height:60px;
        font-size:16px;
        position:absolute;
        color:white; 
    }


    .Hidebg {
       opacity:0.6;
       background-color:#000;
       width:100%;
       height:100%;
       z-index:99;
       position:absolute;
       left:0px;
       top:0px;  
       display:none;
    }


    /* 个人信息显示层 */

    .MineInfo {
        position:absolute;
        bottom:10%;
        left:7.5%; 
        width:150px;
        height:130px;
    }

        .MineInfo .info {
            font-size:16px;
            line-height:30px;
        }
         
     
</style>

<body>

    <div class="header" style="height:20%;">
        <div style="position:absolute;line-height:40px; color:black;font-size:18px;">&emsp;@SysPara.CurAdmin.UserName</div>
        <img src="~/Areas/Mobile/Images/banner.jpg" style="height:100%;width:100%;" />
    </div>


    <div class="Content" style="height:70%">
        <div class="MenuContent" style="display:block;">
             
            <a class="MenuSub" href="@Url.Action("Index","Apply")?type=1">
                <div class="MenuSubIcon" style="background:#ef9f47">
                    <i class="fa fa-toggle-up fa-2x"></i>
                    <div class="MenuSubText" style="text-align:center;">
                        请假申请
                    </div>
                </div>
            </a>
            <a class="MenuSub" href="@Url.Action("Index","Apply")?type=2">
                <div class="MenuSubIcon" style="background:#71bbf0">
                    <i class="fa fa-cubes fa-2x"></i>
                    <div class="MenuSubText" style="text-align:center;">
                        外出申请
                    </div>
                </div>
            </a>
            <a class="MenuSub" href="@Url.Action("Index","Apply")?type=3">
                <div class="MenuSubIcon" style="background:#71bbf0">
                    <i class="fa fa-chevron-circle-down fa-2x"></i>
                    <div class="MenuSubText" style="text-align:center;">
                        出差申请
                    </div>
                </div>
            </a>  
            <a class="MenuSub" href="@Url.Action("Index","Apply")?type=4">
                <div class="MenuSubIcon" style="background:#eb0e4d">
                    <i class="fa fa-chevron-circle-up fa-2x"></i>
                    <div class="MenuSubText" style="text-align:center;">
                        加班申请
                    </div>
                </div>
            </a>  
            <a class="MenuSub" href="@Url.Action("Index","Apply")?type=5">
                <div class="MenuSubIcon" style="background:#32D088">
                    <i class="fa fa-toggle-down fa-2x"></i>
                    <div class="MenuSubText" style="text-align:center;">
                        补卡申请
                    </div>
                </div>
            </a>


            <div class="MenuPar">
                <div class="ParIcon" onclick="ShowCreateType()">
                    <i class="fa fa-plus fa-3x" style="color:#71bbf0;font-weight:100;line-height:70px"></i>
                </div>
                <div class="CreateMenuType" style="opacity:0;">
                    <div class="TypeMenuBg" style="bottom:140px;left:140px;" onclick="Create('LeaveCreate')">    请假 </div>
                    <div class="TypeMenuBg" style="bottom:140px;left:70px; " onclick="Create('OutCreate')">      外出 </div>
                    <div class="TypeMenuBg" style="bottom:140px; left:0px; " onclick="Create('BusinessCreate')"> 出差 </div>
                    <div class="TypeMenuBg" style="bottom:70px;left:0px;   " onclick="Create('ExtWorkCreate')">  加班 </div> 
                    <div class="TypeMenuBg" style="bottom:0px;  left:0px;  " onclick="Create('SuppleCardCreate')"> 补卡 </div>
                </div>
            </div>

            <div class="MineInfo"> 
                <div class="info">当天考勤状态：<span>正常</span></div>  
                <div class="info">本月考勤异常：<span>5</span></div>
                <div class="info">请假天数：<span>20</span></div>
                <div class="info">剩余年假：<span>5</span></div>
            </div> 
             



            <div class="Hidebg" style="height:100%;"></div>
           
        </div>


        <div class="MenuContent" style="display:none;"> 
            <a class="MenuSub" href="@Url.Action("History","Check")">
                <div class="MenuSubIcon" style="background:#71bbf0">
                    <i class="fa fa-user fa-2x"></i>
                    <div class="MenuSubText" style="text-align:center;">
                        本月考勤
                    </div>
                </div>
            </a>
            <a class="MenuSub" href="@Url.Action("History","Check")">
                <div class="MenuSubIcon" style="background:#32C2CD">
                    <i class="fa fa-file-o fa-2x"></i>
                    <div class="MenuSubText" style="text-align:center;">
                        考勤历史
                    </div>
                </div>
            </a>  
            <a class="MenuSub" href="@Url.Action("Index","CardRecord")">
                <div class="MenuSubIcon" style="background:#C1D169">
                    <i class="fa fa-cny fa-2x"></i>
                    <div class="MenuSubText" style="text-align:center;">
                        打卡记录
                    </div>
                </div>
            </a> 
            <a class="MenuSub" href="@Url.Action("Index","ChangePwd")">
                <div class="MenuSubIcon" style="background:#56efe6">
                    <i class="fa fa-key fa-2x"></i>
                    <div class="MenuSubText" style="text-align:center;">
                        修改密码
                    </div>
                </div>
            </a>  
            <a class="MenuSub" onclick="Logout()">
                <div class="MenuSubIcon" style="background:#f32020">
                    <i class="fa fa-power-off fa-2x"></i>
                    <div class="MenuSubText" style="text-align:center;">
                        退出
                    </div>
                </div>
            </a>
        </div>
    </div>

    <div class="foot_menu" style="height:9%; text-align:center;position:absolute;bottom:0;width:100%;background:#efefef;">
        <div class="Menu ChooseMenu" onclick="TransferMenu('0')">
            <div class="MenuIcon">
                <i class="fa fa-bank"></i>
            </div>
            <div class="MenuText">
                事务申请
            </div>
        </div>
        <div class="Menu" onclick="TransferMenu('1')">
            <div class="MenuIcon">
                <i class="fa fa-user"></i>
            </div>
            <div class="MenuText">
                我的信息
            </div>
        </div>
    </div>
      
      
</body>

<script>


    var flag = GetUrlParm("flag");

    $(function ()
    {

        $(document).mouseup(function (e) {
            var con = $(".MenuPar");
            if (!con.is(e.target) && con.has(e.target).length == 0) {
                $(".CreateMenuType").css({
                    "opacity":0,
                })
                ;
                $(".Hidebg").hide(); 
            }
        });

            
        $(".MenuSubIcon .fa").css({
            "top": ($(".MenuSubIcon").height() - 48) / 2
        })

        $(".MenuIcon").css({
            "margin-top": ($(window).height() * 0.09 - $(".MenuIcon").height() - $(".MenuText").height()) / 2
        })
         
        $(".Menus").css({
            "margin-top": ($(".foot_menu").height() - 40) / 2
        })
      
        $(".MenuSubText").css({
            "top": $(".MenuSubIcon").height() - 40
        })
         
        if (flag != null) {
            TransferMenu(flag);
        }
          
        @*localStorage.clear("OpenID");
        localStorage.setItem("OpenID", "@ViewBag.OpenID");*@
     
    })


    function ShowCreateType()
    { 
        if ($(".Hidebg").css("display") == "none")
        {
            $(".CreateMenuType").animate({
                "opacity": 1
            }, 500)

            $(".Hidebg").show();
        }
        else {
            $(".CreateMenuType").animate({
                "opacity": 0
            },500)

            $(".Hidebg").hide();
        } 
    }


    function Create(createHtml)
    {
        location.href = "/Admin/Apply/" + createHtml;
    }




    function TransferMenu(index) {
        $(".Menu").removeClass("ChooseMenu");
        $(".Menu:eq(" + index + ")").addClass("ChooseMenu");
        $(".MenuContent").hide();
        $(".MenuContent:eq(" + index + ")").show();
        @*if (flag != index)
        location.href = "@Url.Action("Index")?flag=" + index;*@
    }



    function Logout()
    {
        location.href = '@Url.Action("Logout", "Gate")';
    }

    function GetUrlParm(name) {
        var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)"); //构造一个含有目标参数的正则表达式对象
        var r = window.location.search.substr(1).match(reg);  //匹配目标参数
        if (r != null) return (r[2]); return null; //返回参数值
    }

</script>